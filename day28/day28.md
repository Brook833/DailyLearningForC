2022.10.8
学习C++primer  6.3.3 返回数组指针


### 返回数组指针
因为数组不能拷贝，所以函数不能返回数组，不过，函数可以返回数组的指针或引用。虽然从语法上来说，要想定义一个返回数组的指针或引用的函数比较繁琐，但是有一些方法可以简化这一任务，其中最直接的方法是使用类型别名。
```c++
typedef int arrT[10];  // arrT是一个类型别名，它表示的类型是含有10个整数的数组。
using arrT = int[10];  // arrT的等价声明。
arrT* func(int i);  // func返回一个指向含有10个整数的数组的指针。
```
func函数接受一个int实参，返回一个指向包含10个整数的数组的指针。

### 声明一个返回数组指针的函数
要想在声明func时不适用类型别名，我们必须牢记被定义的名字后面数组的维度；

int (*p)[10] = &arr; // p是一个指针，它指向含有10个整数的数组。

和上面的声明一样，如果我们想定义一个返回数组指针的函数，则数组的维度必须跟在函数名字之后。然后，函数的形参列表也跟在函数名字后面而且形参列表应该先于数组的维度。
```c++
Type (*func(parameter_list))[dimension];
```

### 使用尾置返回类型
在C++11中还有一种可以简化上述func声明的方法，就是使用尾置返回类型。任何函数的定义都能使用尾置返回，但是这种形式对于返回类型比较复杂的函数最有效，比如返回类型是数组的指针或者数组的引用。尾置返回类型跟在形参列表后面并以一个->符号开头。为了表示函数真正的返回类型跟在形参列表之后，我们在本应该出现返回类型的地方放置一个auto。
```c++
auto func(int i)->int(*)[10];
```

### 使用decltype
还有一种情况，如果我们知道函数返回的指针将指向哪个数组，就可以使用decltype关键字声明返回类型。
```c++
int odd[] = {1, 3, 5, 7, 9};
decltype(odd) *arrPtr(int i) {}
```

## 函数重载
如果同一作用域内的几个函数名字相同但形参列表不同，我们称之为重载函数。
```c++
void print(const char *p);
void print(const int *beg, const int *end);
void print(const int ia[], size_t size);
```
这些函数接受的形参类型不一样，但是执行的操作非常类似。当调用这些函数的时,编译器去会根据传递的实参类型推断想要的是哪个函数。

函数的名字仅仅是让编译器知道它调用的是哪个函数，而函数重载可以在一定程度上减轻程序员起名字、记名字的负担。
