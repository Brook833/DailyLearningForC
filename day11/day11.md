2022.9.19
复习C++primer  3.5.1定义和初始化内置数组  3.5.2访问数组元素  3.53.数组和指针

## 数组
数组是一种类似于标准库vector的数据结构，与vector不同的是，数组的大小确定不变，不能随意向数组中增加元素。

如果不清楚元素的具体个数，请使用vector。

### 定义和初始化内置数组
数组的维度必须是一个常量表达式。

默认情况下，数组的元素被默认初始化。和内置类型的变量一样，如果在函数内部定义了某种内置类型的数组，那么默认初始化会令数组还有未定义的值。

定义数组的时候必须指定数组的类型，不允许用auto关键字由初始值的列表推断类型。另外和vector一样，数组的元素应为对象，因此不存在引用的数组。

### 显示初始化数组元素
int ia1[3] = {0, 1, 2}; //3个元素的数组。

int a2[] = {0, 1, 2};  //3个元素的数组。

int a3[5] = {0, 1, 2};  //等价于a3[5] = {0, 1, 2, 3, 0, 0};

string a4[3] = {"hi", "bye"};  //等价于a4[3] = {"hi", "bye", ""};

### 字符数组的特殊性
字符数组有一种额外的初始化方式，我们可以用字符串字面值对此类数组初始化。当使用这种方式时，一定要注意字符串字面值的结尾处还有一个空字符。

char a1[] = "C++";  //自动添加字符串结束的空字符

const char a2[6] = "Daniel";  //错误：没有空间存放空字符。

### 不允许拷贝和赋值
不能将数组的内容拷贝给其他数组作为初始值，也不能用数组为其他数组赋值。

一些编译器支持数组的赋值，这就是所谓的编译器扩展。但一般来说，最好避免使用费标准特性，因为含有非标准特性的程序可能在其他编译器上无法正常工作。

### 理解复杂的数组声明 
int *ptrs[10];  //ptrs是含有10个整型指针的数组

int &refs[10] = ?;  //错误:不存在引用的数组

int (*parray)[10] = &arry;  //parray指向一个含有10个整数的数组

int (&arrRef)[10] = arr;  //arrRef引用一个含有10个整数的数组。

默认情况下，类型修饰符从右向左依次绑定。

但就数组而言，由内向外阅读要比从右向左好多了。

int *(&arry)[10] = ptrs;  //arry是数组的引用，该数组含有10个指针

### 访问数组元素
与标准库类型vector和string一样，数组的元素也能使用范围for语句或下标运算符来访问。

在使用数组下标的时候，通常将其定义为size_t类型。

size_t是一种机器相关的无符号类型，在cstddef头文件中定义了size_t的类型。

### 检查下标的值
与vector和string一样，数组的下标是否在合理的范围之内由程序员负责检查。下标应该大于等于0而且小于数组的大小。

### 指针和数组
在C++语言中，指针和数组有非常紧密的联系。使用数组的时候，编译器一般会把它转换成指针。

通常情况下，使用取地址符来获取某个对象的指针，取地址符可以用于任何对象。对数组的元素使用取地址符就能得到指向该元素的指针。

string nums[] = {"one", "two", "three"};  //数组的元素是string对象。

string *p = &nums[0];  //p指向nums的第一个元素。

数组还有一个特性，在很多用到数组名字的地方，编译器都会自动地将其替换为一个指向数组首地址的指针。

### 指针也是迭代器
vector和string的迭代器支持的运算，数组的指针全都支持。

可以获取数组尾元素之后的那个并不存在的元素的地址。

int *e = &arr[10]; //指向arr尾元素的下一位置的指针。

### 标准库函数begin和end
尽管可以获取尾后指针，但这种方法容易出错。更建议使用begin和end函数。

这两个函数与容器中的两个童名成员功能类似，但数组毕竟不是类类型，因此这两个函数不是成员函数。正确的实用形式是将数组作为他们的参数。

int ia[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};

int *beg = begin(ia); //指向ia首元素的指针。

int *last = end(ia);  //指向ia尾元素的下一位置的指针。

这两个函数定义在iterator中。

### 指针运算
两个指针相减的结果类型是一种名为ptrdiff_t的标准库类型，和size_t一样，定义在cstddef头文件中。

### 下标和指针
标准库类型限定使用的下标必须是无符号类型，而内置的下标运算无此要求。（可能是因为标准库类型中没有数组类型）
