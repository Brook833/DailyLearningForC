# 13.2 拷贝控制和资源管理
通常，管理类外资源的类必须定义拷贝控制成员。这种类需要通过析构函数来释放对象所分配的资源，一旦一个类需要析构函数，那么它几乎肯定需要一个拷贝构造函数和一个拷贝赋值运算符。

为了定义这些成员，我们首先必须确定此类型对象的拷贝语义。一般来说，有两种选择:可以定义拷贝操作，使类的行为看起来想一个值或一个指针。

类的行为像一个值，意味着他应该也有自己的状态。当我们拷贝一个像值的对象时，副本和原对象是完全独立的。改变副本不会对原对象有任何影响，反之亦然。

行为像那个指针的类则共享状态。当我们拷贝一个这种类的对象时，副本和原对象使用相同的底层数据。改变副本也会改变原对象，反之亦然。

在我们使用过的标准库类中，标准库容器和string类的行为像一个值。而不出意外的，shared_ptr类提供类似指针的行为，就像我们的StrBlob类一样，IO类型和unique_ptr不允许拷贝或赋值，因此它们的行为既不像值也不像指针。

为了说明这两种方式，我们会为练习中的HasPtr类定义拷贝控制成员。首先，我们将令类的行为像一个值；然后重新实现类，使他的行为像一个指针。

我们的HasPtr类有两个成员，一个int和一个string指针。通常，类直接拷贝内置类型(不包括指针)成员;这些成员本身就是值，因此通常应该让他们的行为像值一样。我们如何拷贝指针成员决定了像HasPtr这样的类时具有类值行为还是类指针行为。