2022.10.5
学习C++primer  6.2.3const形参和实参  6.2.4数组形参

### const形参和实参
当形参是const时，必须要注意关于顶层const的讨论（不能改变对象本身）。

和其他初始化过程一样，当用实参初始化形参时会忽略掉顶层const

void fun(const int i){};

void fun(int i){};

在C++语言中，允许我们定义若干具有相同名字的函数，不过前提是不同函数的形参列表应该有明显的区别。因为顶层const被忽略掉了，所以上面的第二个函数实际上他的形参和第一个没什么不同。

### 指针或引用形参与const
形参的初始化方式和变量的初始化方式是一样的。

我们可以使用和非常量初始化一个底层const对象，但是反过来不行。

同时一个普通的引用必须用同类型的对象初始化。

### 尽量使用常量引用
把函数不会改变的形参定义成普通的引用是一种比较常见的错误，这么做带给函数的调用者一种误导，即函数可以修改他的实参的值。此外，使用引用而非常量引用也会极大地限制函数所能接受的实参类型。

### 数组形参
数组的两个特殊性质对我们定义和使用作用在数组上的函数有影响，这两个性质分别是：不允许拷贝数组，以及使用数组时通常会将其转换成指针。

因为数组会被转换成指针，所以当我们为函数传递一个数组时，实际上传递的是只想数组首元素的指针。

尽管不能以值传递的方式传递数组，但是我们可以把形参写成类似数组的形式:

```c++
void print(const int*);
void print(const int[]);
void print(const int[10]);//这里的维度表示我们期望数组含有多少元素，实际上不一定。
```
尽管形式不同，但这三个函数是等价的。

如果我们传给print函数的是一个数组，则实参自动的转换成指向数组首元素的指针，数组的大小对函数的调用没有影响。

所以一开始函数并不知道数组的确切尺寸，调用者应该为此提供一些额外的信息。管理指针形参有三种常用的技术。

### 使用标记指定数组长度
管理数组实参的第一种方法是要求数组本身包含一个结束标记，使用这种方法的典型示例是C风格字符串。C风格字符串存储在字符数组中，并且在最后一个字符后面跟着一个空字符。函数在处理C风格字符串时遇到空字符停止。

这种风格适用于那些有明显结束标记切该标记不会与普通数据混淆的情况。

### 使用标准库规范
管理数组实参的第二种方法是传递指向数组首元素和尾后元素的指针，这种方法受到了标准库技术的启发。

### 显示传递一个表示数组大小的形参
第三种管理数组实参的方法是专门定义一个表示数组大小的形参，在C程序中常常使用这种方法。

### 数组形参和const
当函数不需要对数组元素执行写操作的时候，数组形参应该是指向const的指针。

### 数组引用形参
C++语言允许将变量定义成数组的引用，基于同样的道理，形参也可以是数组的引用。此时，引用形参绑定到对应的实参上，也就是绑定到数组上。
```c++
void print(int (&arr)[10]){};  //arr两端的括号必不可少
```

### 传递多维数组
和所有数组一样，当多维数组传递给函数时，真正传递的时指向数组首元素的指针。因为我们处理的时数组的数组，所以首元素本身就是一个数组，指针就是一个指向数组的指针。