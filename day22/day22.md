2022.10.1
学习C++primer  5.6.1try语句块和异常处理  5.6.2 try语句块  5.6.3标准异常

### throw表达式
程序的异常检测部分使用thorw表达式引发一个异常。

throw表达式包含关键字throw和紧随其后的一个表达式，其中表达式的类型就是抛出的异常类型。throw表达式后面通常紧跟一个分号，从而构成一条表达式语句。

### try语句块
try语句块的通用语法形式是
```
try {
    program-statements
} catch (exception-declaration) {
    handler-statements
} catch (exception-declaration) {
    handler-statements
}
```
try语句块的一开始是关键字try，随后紧跟着一个块。

跟在try块之后的是一个或多个catch子句。catch子句包括三部分：关键字catch、括号内一个对象的声明(称作异常声明)以及一个块。当选只能怪了某个catch子句处理异常之后，执行与之相对应的块。catch一旦完成，程序跳转到try语句块最后一个catch子句之后的那条语句继续执行。

### 函数在寻找处理代码的过程中退出
在复杂系统中，程序在遇到抛出异常的代码前，其执行路径可能已经经过了多个try语句块。

寻找处理代码的过程与函数调用链正好相反，当异常被抛出时，首先搜索抛出该异常的函数，如果没找到匹配的catch子句，终止该函数，并在调用该函数的函数中继续寻找。沿着程序的执行路径逐层回退，直到找到适当类型的catch子句为止。

如果最终还是没能找到任何匹配的catch子句，程序转到名为terminate的标准库函数。该函数的行为与系统有关，一般情况下，执行该函数将导致程序非正常退出。

对于那些没有任何try语句块定义的异常，也按照类似的方式处理。如果一段程序没有try语句块且发生了异常，系统会调用terminate函数并终止当前程序的执行。

### 标准异常
C++标准库定义了一组类，用于报告标准库函数遇到的问题。这些异常类也可以在用户编写的的程序中使用，他们分别定义在4个头文件中：

exception头文件定义了最通用的异常类exception。它只报告异常的发生，不需要提供任何额外信息。

stdexcept头文件定义了集中常用的异常类。

new头文件定义了bad_alloc异常类型。

type_info头文件定义了bad_cast异常类型。

标准库异常类只定义了集中运算，包括创建或拷贝异常类型的对象，以及为异常类型的对象赋值。

我们只能以默认初始化的方式初始化exception、bad_alloc和bad_cast对象，不允许为这些对象提供初始值。

其他异常类型的行为则恰好相反：应该使用string对象或者C风格字符串初始化这些类型的对象，但是不允许使用默认初始化的方式。当创建此类对象时，必须提供初始值。

异常类型只定义了一个名为whar的成员函数，该函数没有任何参数，返回值是一个指向C风格字符串的const char*。目的是提供关于异常的一些文本信息。返回的字符串内容与异常对象的类型有关。